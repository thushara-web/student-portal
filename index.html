<!DOCTYPE html>
<html>
<head>
  <title>Career & DSA Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial; background:#0f172a; color:white; padding:20px; }
    h1,h2,h3 { text-align:center; margin:10px 0; }
    input, textarea, button { width:90%; max-width:400px; padding:10px; margin:5px 0; border-radius:6px; border:none; }
    button { cursor:pointer; font-weight:bold; }
    .box { background:#1e293b; padding:20px; border-radius:10px; margin:10px auto; max-width:500px; }
    ul { list-style:none; padding:0; }
    li { margin:15px 0; }
    .answer { padding:10px; border-radius:8px; display:block; margin-top:5px; }
    .programming { background:#2563eb33; color:white; }
    .dsa { background:#db277733; color:white; }
    .career { background:#16a34a33; color:white; }
    #logout { background:#ef4444; margin-top:10px; width:95%; }
    .related { font-size:14px; color:#fcd34d; margin-top:5px; }
    mark { background:#fcd34d; color:black; }
  </style>
</head>
<body>

<h1>ðŸŽ“ Career & DSA Guidance Portal</h1>

<div class="box" id="loginBox">
  <input id="username" placeholder="Enter username">
  <button onclick="login()">Login</button>
</div>

<div class="box" id="portal" style="display:none">
  <h2>Welcome, <span id="user"></span></h2>
  <textarea id="question" placeholder="Ask a question about Programming, DSA, or Career"></textarea>
  <button onclick="postQuestion()">Get Advice</button>
  <button id="logout" onclick="logout()">Logout</button>
  <h3>Your Questions & Guidance</h3>
  <ul id="list"></ul>
</div>

<script>
let answers = {
  "programming": {
    "python":"Python is great for AI, Data Science, Web.",
    "java":"Java is used for apps and Android.",
    "c++":"C++ is important for competitive programming.",
    "javascript":"JavaScript is used for web development."
  },
  "dsa": {
    "dsa":"DSA is essential for coding interviews.",
    "algorithm":"Practice sorting, searching, recursion, graphs.",
    "recursion":"Recursion is when a function calls itself.",
    "graph":"Graphs model networks and advanced problems."
  },
  "career": {
    "internship":"Try internships in companies or startups.",
    "placements":"Practice coding, aptitude, soft skills.",
    "skills":"Focus on coding, problem solving, communication.",
    "jobs":"IT, Data Science, Web Development, AI, Cloud."
  }
};

function login(){
  let u=document.getElementById("username").value.trim();
  if(u===""){ alert("Enter username"); return; }
  localStorage.setItem("user", u);
  showPortal();
}

function logout(){
  localStorage.removeItem("user");
  document.getElementById("portal").style.display="none";
  document.getElementById("loginBox").style.display="block";
}

function showPortal(){
  let u=localStorage.getItem("user");
  if(u){
    document.getElementById("loginBox").style.display="none";
    document.getElementById("portal").style.display="block";
    document.getElementById("user").innerText = u;
    loadQuestions();
  } else {
    document.getElementById("portal").style.display="none";
    document.getElementById("loginBox").style.display="block";
  }
}

function highlightKeywords(text, keywords){
  keywords.forEach(k=>{
    let re=new RegExp(k,"gi");
    text=text.replace(re,`<mark>${k}</mark>`);
  });
  return text;
}

function postQuestion(){
  let q=document.getElementById("question").value.trim();
  if(q===""){ alert("Type a question!"); return; }

  let qs=JSON.parse(localStorage.getItem("questions")||"[]");

  let lowerQ=q.toLowerCase();
  let a="Sorry, I don't have advice for that yet.";
  let categoryFound="career";
  let matchedKeywords=[];

  for(let cat in answers){
    for(let key in answers[cat]){
      if(lowerQ.includes(key)){
        a=answers[cat][key];
        categoryFound=cat;
        matchedKeywords.push(key);
        break;
      }
    }
  }

  qs.push({question:q, answer:a, category:categoryFound, keywords:matchedKeywords});
  localStorage.setItem("questions", JSON.stringify(qs));
  document.getElementById("question").value="";
  loadQuestions();
}

function loadQuestions(){
  let qs=JSON.parse(localStorage.getItem("questions")||"[]");
  let out="";
  qs.forEach(obj=>{
    let questionHighlighted = highlightKeywords(obj.question,obj.keywords);
    out+=`<li><b>[${obj.category.toUpperCase()}]</b> Q: ${questionHighlighted}<br>
          <span class="answer ${obj.category}">Advice: ${obj.answer}</span>`;

    let related=qs.filter(r=>r.category===obj.category && r.question!==obj.question);
    if(related.length>0){
      out+=`<div class="related">Related questions: `;
      related.forEach(rq=>{ out+=`"${rq.question}" `; });
      out+=`</div>`;
    }

    out+=`</li>`;
  });
  document.getElementById("list").innerHTML=out;
}

// Always show portal correctly based on login
showPortal();
</script>

</body>
</html>
